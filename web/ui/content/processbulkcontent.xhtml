<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">


    <body>

        <ui:composition template="./../home/header.xhtml">

            <ui:define name="content">
                 <h:form id="frm1" enctype="application/x-www-form-urlencoded">
                     <table>
                         <tr>
                             <td colspan="4" align="center" class="bannerheadsmall"> Select below parameters to configure search query.</td>
                         </tr>
                          <tr>
                             <td colspan="4" align="center" class="bannerheadsmall"> &nbsp;</td>
                         </tr>
                         <tr>
                             <td width="25%" align="right" class="labeltext"> Content Status:</td>
                             <td width="25%"  align="left"  class="labeltext"><p:selectOneMenu class="labeltext" id="statuscat" value="#{bulkContentUploadBean.selectedBulkContentType}"  style="width: 170px;">
                                    <f:selectItem itemLabel="Unprocessed Content" itemValue="0" />
                                    <f:selectItem itemLabel="Processed Content" itemValue="1" />
                                    <p:ajax event="change" listener="#{bulkContentUploadBean.reloadBulkContentRecords(true,false)}" partialSubmit="true" update="contentlisttable"/>
                                </p:selectOneMenu></td>
                             <td width="25%"  align="right" class="labeltext">Content Provider:</td>
                             <td width="25%"  align="left" class="labeltext"><p:selectOneMenu id="superCategory" value="#{bulkContentUploadBean.selectedContentProvider}"  style="width:170px;">
                                                <f:selectItem itemLabel="Select Content Provider" itemValue="" />
                                                <f:selectItems value="#{bulkContentUploadBean.contentProviderList}"/>
                                             <p:ajax event="change" listener="#{bulkContentUploadBean.reloadBulkContentRecords(true,false)}" partialSubmit="true" update="contentlisttable"/>   
                                            </p:selectOneMenu>
                             </td>
                         </tr>
                       
                     </table>    
                     <p:dataTable id="contentlisttable" var="bulkcontent" value="#{bulkContentUploadBean.bulkContentList}" editable="true" paginator="true" rows="10" selectionMode="single" selection="#{bulkContentUploadBean.selectedBulkContent}" rowKey="#{bulkcontent.bulkContentId}">
                                <f:facet name="header">
                                    
                                    List of Content   <p:commandButton id="cmdProcess" widgetVar="cmdProcessBulk" value="Process Selected Record" update="contentlisttable" onclick="PF('pbAjax').start();PF('cmdProcessBulk').disable();" action="#{bulkContentUploadBean.processBulkRecord()}" /> 
                                    <p:progressBar  widgetVar="pbAjax" ajax="true"  value="#{bulkContentUploadBean.progress}" labelTemplate="{value}%" styleClass="animated" style="width: 100px;" global="false">
                                        <p:ajax event="complete" listener="#{bulkContentUploadBean.onComplete}" update="" oncomplete="PF('cmdProcessBulk').enable()"/>
                                    </p:progressBar>

                                </f:facet>
                                <p:column style="alignment-adjust: middle;alignment-baseline: central;">
                                    <f:facet name="header">
                                        <h:outputText value="Bulk Content Id" />
                                    </f:facet>
                                    <h:outputText value="#{bulkcontent.bulkContentId}" />
                                </p:column>
                         <p:column filterBy="#{bulkcontent.metaDataFileName}" style="alignment-adjust: middle;alignment-baseline: central;">
                                    <f:facet name="header">
                                        <h:outputText value="Meta-Data File Name" />
                                    </f:facet>
                             <h:outputText value="#{bulkcontent.metaDataFileName}" />
                                </p:column>
                         <p:column filterBy="#{bulkcontent.contentFileName}" style="alignment-adjust: middle;alignment-baseline: central;">
                                    <f:facet name="header">
                                        <h:outputText value="Content File Name" />
                                    </f:facet>
                             <h:outputText value="#{bulkcontent.contentFileName}" />
                                </p:column>
                         <p:column filterBy="#{bulkcontent.cpName}" style="alignment-adjust: middle;alignment-baseline: central;">
                                    <f:facet name="header">
                                        <h:outputText value="Content Provider :: UserId" />
                                    </f:facet>
                             <h:outputText value="#{bulkcontent.cpName}" />
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Status" />
                                    </f:facet>
                                    <h:outputText value="#{bulkcontent.status}" />
                                </p:column>
                                <p:column >
                                    <f:facet name="header">
                                        <h:outputText value="Status Description" />
                                    </f:facet>
                                    <h:outputText value="#{bulkcontent.statusDescription}" />
                                </p:column>
                                <p:column >
                                    <f:facet name="header">
                                        <h:outputText value="Upload Date" />
                                    </f:facet>
                                    <h:outputText value="#{bulkcontent.uploadDate}" />
                                </p:column>
                                <p:column >
                                    <f:facet name="header">
                                        <h:outputText value="Processed Date" />
                                    </f:facet>
                                    <h:outputText value="#{bulkcontent.processDate}" />
                                </p:column>
                                
                            </p:dataTable>
                            
                 </h:form>
            </ui:define>

        </ui:composition>

    </body>
</html>
