<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <body>

        <ui:composition template="./../home/header.xhtml">

            <ui:define name="content">
                <h:form id="frm1" enctype="application/x-www-form-urlencoded">
                    
                    <table width="100%" align="center" border="0">
                        <tr><td colspan="10" width="100%"><h:outputText id="msgout" class="#{portalContentSchedulingBean.statusMsg.msgClass}" value="#{portalContentSchedulingBean.statusMsg.message}"/></td></tr>
                        <tr>
                            <td width="10%"  align="right" class="labeltext">Portal Name:</td>
                            <td width="10%"  align="justify" class="labeltext"><p:selectOneMenu id="portalName" value="#{portalContentSchedulingBean.selectedPortalId}" class="labeltext" style="width:140px;">
                                    <f:selectItem itemLabel="Select Portal" itemValue="0" />
                                    <f:selectItems value="#{portalContentSchedulingBean.portalList}"/>
                                     <p:ajax event="change" listener="#{portalContentSchedulingBean.fetchData(false,false, true,false, true,false, false, false,false,false)}" partialSubmit="true" update="cmsCPList,frm1:portalcontentlist:cmsOperatorList,msgout"/>   
                                </p:selectOneMenu>
                            </td>
                             <td width="10%"  align="right" class="labeltext"><h:outputText value="Mapping for : " /></td>
                             <td width="10%"  align="left" class="labeltext"><p:selectOneButton value="#{portalContentSchedulingBean.mappingFor}">
                                     <f:selectItem itemLabel="Left Menu" itemValue="menu"  />
                                        <f:selectItem itemLabel="Homepage" itemValue="home" />
                                     <p:ajax event="change" listener="#{portalContentSchedulingBean.fetchData(true,false, false,false, false,false, false, false,false,false)}"  update="cmstabname,msgout"/>   
                                 </p:selectOneButton>
                            </td>
                             <td width="10%"  align="right" class="labeltext">Tab Name:</td>
                            <td width="10%"  align="left" class="labeltext"><p:selectOneMenu id="cmstabname" value="#{portalContentSchedulingBean.selectedTabId}" class="labeltext" style="width:140px;">
                                    <f:selectItem itemLabel="Select Tab" itemValue="0" />
                                    <f:selectItems value="#{portalContentSchedulingBean.tabList}"/>
                                </p:selectOneMenu>
                            </td>
                            <td width="10%"  align="right" class="labeltext">CP-Name:</td>
                            <td width="10%"  align="left" class="labeltext"><p:selectOneMenu id="cmsCPList" value="#{portalContentSchedulingBean.selectedContentProvider}" class="labeltext" style="width:140px;">
                                    <f:selectItem itemLabel="Content Provider" itemValue="0" />
                                    <f:selectItems value="#{portalContentSchedulingBean.contentCPList}"/>
                                    <p:ajax event="change" listener="#{portalContentSchedulingBean.fetchData(false,false, false,false, false,true, false, false,false,false)}" partialSubmit="true" update="cmsSuperCategory,msgout"/>   
                                </p:selectOneMenu>
                            </td>
                            <td width="10%"  align="right" class="labeltext">Content Type:</td>
                            <td width="10%"  align="left" class="labeltext"><p:selectOneMenu id="cmsContentType" value="#{portalContentSchedulingBean.selectedContentType}" class="labeltext" style="width:140px;">
                                    <f:selectItem itemLabel="Content Type" itemValue="0" />
                                    <f:selectItems value="#{portalContentSchedulingBean.contentTypeList}"/>
                                    <p:ajax event="change" listener="#{portalContentSchedulingBean.fetchData(false,false, false,false, false,true, false, false,false,false)}" partialSubmit="true" update="cmsSuperCategory,msgout"/>   
                                </p:selectOneMenu>
                            </td>
                            <td width="10%"  align="right" class="labeltext">Category:</td>
                            <td width="10%"  align="left" class="labeltext"><p:selectOneMenu id="cmsSuperCategory" value="#{portalContentSchedulingBean.selectedCategory}" class="labeltext" style="width:140px;">
                                    <f:selectItem itemLabel="Super Category" itemValue="0" />
                                    <f:selectItems value="#{portalContentSchedulingBean.contentCategoryList}"/>
                                    <p:ajax event="change" listener="#{portalContentSchedulingBean.fetchData(false,false, false,false, false, false,true, false,false,false)}" partialSubmit="true" update="cmsContentCategory,msgout" />   
                                </p:selectOneMenu>
                            </td>
                            <td width="10%"  align="right" class="labeltext">Sub-Category:</td>
                            <td width="10%"  align="left" class="labeltext"><p:selectOneMenu id="cmsContentCategory" value="#{portalContentSchedulingBean.selectedSubCategory}" class="labeltext" style="width:140px;">
                                    <f:selectItem itemLabel="Content Category" itemValue="0" />
                                    <f:selectItems value="#{portalContentSchedulingBean.contentSubCategoryList}"/>
                                </p:selectOneMenu>
                            </td>
                            
                        </tr>
                      </table>    
                      <table align="center" width="100%" border="1" >
                        <tr valign="top">
                            <td width="45%" align="center" class="tableheadsmall">
                            <!-- iNSERT DATA TABLE FOR SOURCVE CONTENT -->
                            <p:dataTable id="contentlisttable" var="bulkcontent" value="#{portalContentSchedulingBean.availableCMSContent}" editable="true" paginator="true" rows="100" selectionMode="multiple" selection="#{portalContentSchedulingBean.selectedCMSContents}" rowKey="#{bulkcontent.contentId}" class="labeltext">
                                   <f:facet name="header">
                                       Available Contents from CMS  <p:commandButton id="refreshsourcebtn" update="contentlisttable" value="Reload Content" action="#{portalContentSchedulingBean.fetchData(false,false, false,false, false, false,false, true, false, false)}" class="labeltext"  style="width:150px;"/>
                                   </f:facet>
                                   <p:column style="alignment-adjust: middle;alignment-baseline: central;">
                                       <f:facet name="header">
                                           <h:outputText value="Preview Image" />
                                       </f:facet>
                                       <h:graphicImage value="#{viewContentMBean.contentBaseURL}#{bulkcontent.contentPath}"/>
                                   </p:column>
                                   <p:column filterBy="#{bulkcontent.catalogNumber}" style="alignment-adjust: middle;alignment-baseline: central;">
                                       <f:facet name="header">
                                           <h:outputText value="Catalog Number" />
                                       </f:facet>
                                       <h:outputText value="#{bulkcontent.catalogNumber}" />
                                   </p:column>
                                   <p:column filterBy="#{bulkcontent.contentName}" style="alignment-adjust: middle;alignment-baseline: central;">
                                       <f:facet name="header">
                                           <h:outputText value="Content Name" />
                                       </f:facet>
                                       <h:outputText value="#{bulkcontent.contentName}" />
                                   </p:column>

                               </p:dataTable>
                            </td>
                            <td width="5%" valign="top" align="center"  class="tableheadsmall">
                                <!-- Buttons for content placement-->
                                <p:commandButton id="movealltoPortalbtn" update="contentlisttable,portalcontentlist,frm1:msgout" action="#{portalContentSchedulingBean.fetchData(false,false, false,false, false, false, false,false, false, true)}" value="&gt;&gt;"  class="labeltext"/> <br/>
                                <p:commandButton id="removeallfromportalbtn" update="contentlisttable,portalcontentlist,frm1:msgout" value="&lt;&lt;" action="#{portalContentSchedulingBean.removeContentFromPortal()}" class="labeltext" />
                            </td>
                           <td width="50%"  align="center"  class="tableheadsmall">
                               <!-- iNSERT DATA TABLE FOR dest CONTENT -->
                               <p:dataTable id="portalcontentlist" var="bulkcontent" value="#{portalContentSchedulingBean.portalMappedContent}" editable="true" paginator="true" rows="100" selectionMode="multiple" selection="#{portalContentSchedulingBean.selectedPortalContents}" rowKey="#{bulkcontent.contentId}" class="labeltext">
                                        <f:facet name="header">
                                            Live Content on Portal   <br/>
                                            Operator <p:selectOneMenu id="cmsOperatorList" value="#{portalContentSchedulingBean.selectedOperatorId}" class="labeltext" style="width:140px;">
                                    <f:selectItem itemLabel="Select Operator" itemValue="0" />
                                    <f:selectItems value="#{portalContentSchedulingBean.operatorList}"/>
                                </p:selectOneMenu>
                                            <p:commandButton id="refreshportalbtn" update="portalcontentlist" value="Reload Content" action="#{portalContentSchedulingBean.fetchData(false,false, false,false, false, false, false,false, true, false)}" class="labeltext" style="width:150px;"/>
                                            
                                        </f:facet>
                                        <p:column style="alignment-adjust: middle;alignment-baseline: central;">
                                            <f:facet name="header">
                                                <h:outputText value="Preview Image" />
                                            </f:facet>
                                            <h:graphicImage value="#{viewContentMBean.contentBaseURL}#{bulkcontent.contentPath}"/>
                                        </p:column>
                                        <p:column filterBy="#{bulkcontent.catalogNumber}" style="alignment-adjust: middle;alignment-baseline: central;">
                                            <f:facet name="header">
                                                <h:outputText value="Catalog Number" />
                                            </f:facet>
                                            <h:outputText value="#{bulkcontent.catalogNumber}" />
                                        </p:column>
                                        <p:column filterBy="#{bulkcontent.contentName}" style="alignment-adjust: middle;alignment-baseline: central;">
                                            <f:facet name="header">
                                                <h:outputText value="Content Name" />
                                            </f:facet>
                                            <h:outputText value="#{bulkcontent.contentName}" />
                                        </p:column>
                                        <p:column filterBy="#{bulkcontent.showOrder}" style="alignment-adjust: middle;alignment-baseline: central;">
                                            <f:facet name="header">
                                                <h:outputText value="Show Order" />
                                            </f:facet>
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{bulkcontent.showOrder}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <h:inputText value="#{bulkcontent.showOrder}"/>
                                                </f:facet>
                                            </p:cellEditor>
                                            
                                        </p:column>
                                         <p:ajax event="rowEdit" listener="#{portalContentSchedulingBean.onEdit}" update="portalcontentlist" />
                                        <p:column>
                                             <p:rowEditor />
                                        </p:column>
                                </p:dataTable>
                            </td>
                        </tr>
                    </table>
                </h:form>
            </ui:define>

        </ui:composition>

    </body>
</html>
